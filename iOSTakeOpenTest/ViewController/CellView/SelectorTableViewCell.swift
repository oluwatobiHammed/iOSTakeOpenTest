//
//  SelectorTableViewCell.swift
//  iOSTakeOpenTest
//
//  Created by Oladipupo Oluwatobi on 10/06/2020.
//  Copyright Â© 2020 Oladipupo Oluwatobi. All rights reserved.
//

import UIKit

class SelectorTableViewCell: UITableViewCell {
    
    @IBOutlet weak var textField: DesignableTextField!
    @IBOutlet weak var headerLabel: UILabel!
    @IBOutlet weak var errorLabel: UILabel!
    var pickerView: UIPickerView?
    var type = ["Yes","No"]
    var data: Elements! {
        didSet {
            pickerView = UIPickerView()
            pickerView?.delegate = self
            pickerView?.dataSource = self
            if let headerTitle = data.label {
                headerLabel.text = headerTitle
            }
            if let elements = data {
                textField.beginFloatingCursor(at: CGPoint(x: 15, y: 0))
                if let name = elements.label {
                    if name == "Do you have a yard?" {
                        textField.inputView = pickerView
                        textField.textAlignment = .center
                        textField.placeholder = "Select Answer"
                    }else {
                        textField.valueType = .fullName
                        textField.keyboardType = .default
                        textField.placeholder =  "   " + "\(name)"
                    }
                    if elements.isMandatory == true {
                        headerLabel.text =   "\(name) *"
                    }else{
                        headerLabel.text =   "\(name)"
                    }
                }
                
                
            }
        }
    }
    
    
    
}

extension SelectorTableViewCell: UIPickerViewDelegate, UIPickerViewDataSource {
    func numberOfComponents(in pickerView: UIPickerView) -> Int {
        return 1
    }
    
    func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
        
        return type.count
    }
    
    func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String? {
        
        return type[row]
    }
    
    func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int) {
        
        textField.text = type[row]
    }
    
}


